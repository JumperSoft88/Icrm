if (self.CavalryLogger) { CavalryLogger.start_js(["hbZq2"]); }

__d("ActivityLogNUXController",["csx","AsyncRequest","DOM","DOMScroll","URI","$"],(function(a,b,c,d,e,f,g){var h,i={NAVIGATION:"navigation",FILTERS:"filters",EDIT:"edit"},j=[i.NAVIGATION,i.FILTERS,i.EDIT],k={ALL:"all",TAGGED_PHOTOS:"taggedphotos"};function l(a,c){a={step:a};c&&(a.action=c);new(b("AsyncRequest"))("/ajax/timeline/all_activity/nux_checkpoint.php").setData(a).send()}var m={init:function(a){m.initialized||(Object.assign(m,{dialogs:a.dialogs,initialized:!0,finished:!1}),m.initDialogs()),m.setStep(a.nextStep)},initDialogs:function(){j.forEach(function(b,c){var d=m.dialogs[b];d.subscribe("button",function(b,e){a(d,e,c)})});function a(a,b,c){a.hide();switch(b.getAttribute("data-action")){case"back":m.setStep(j[c-1]);break;case"next":m.setStep(j[c+1]);break;case"defer":m.suppressUsered();break;case"close":case"done":m.setFinished();break}l(j[c],b.getAttribute("data-action"))}},setStep:function(a){if(m.finished)return;switch(a){case i.NAVIGATION:m.setFilter(k.ALL)||m.showNavigationDialog();break;case i.FILTERS:m.setFilter(k.TAGGED_PHOTOS)||m.showFiltersDialog();break;case i.EDIT:m.showEditDialog();break}},showNavigationDialog:function(){var a=m.dialogs[i.NAVIGATION],c=b("DOM").scry(b("$")("navItem_photos"),".linkWrap")[0],d=b("DOM").create("span");b("DOM").appendContent(c,d);a.setContext(d).setOffsetX(5).show();l(i.NAVIGATION)},showFiltersDialog:function(){var a=m.dialogs[i.FILTERS],c=b("DOM").find(document.body,"._kj4");a.setContext(c).setOffsetX(-3).setOffsetY(2).show();l(i.FILTERS)},showEditDialog:function(){var a=m.dialogs[i.EDIT],c=b("DOM").scry(document.body,"._2fmu");c=c[0];c?(b("DOMScroll").scrollTo(c,!0,!0,!1),a.setContext(c).setOffsetX(-8).show(),l(i.EDIT)):m.setFinished()},setFilter:function(a){var c=(h||(h=b("URI"))).getNextURI(),d=c.getQueryData().log_filter||k.ALL;if(d===a)return!1;c.addQueryData({log_filter:a,usered:1,privacy_source:"activity_log_nux"}).go();return!0},setFinished:function(){m.finished=!0,m.cleanup(),new(b("AsyncRequest"))("/ajax/timeline/all_activity/nux_checkpoint.php").setData({finished:!0}).send()},suppressUsered:function(){b("DOM").scry(b("$")("sideNav"),"a.item").forEach(function(a){a.href=new(h||(h=b("URI")))(a.href).addQueryData({suppress_usered:1})})},cleanup:function(){var a=m.dialogs;for(var b in a)a[b].destroy()}};e.exports=m}),null);
__d("AYMTHomepagePanelLogger",["BanzaiLogger","Event","tidyEvent"],(function(a,b,c,d,e,f){a={init:function(a,c){b("tidyEvent")(b("Event").listen(a,"click",function(a){b("BanzaiLogger").log("AYMTHomepagePanelLoggerConfig",c)}))}};e.exports=a}),null);